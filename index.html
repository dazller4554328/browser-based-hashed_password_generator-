
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Offline Password Generator</title>
<style>
    :root {
        --bg-color: #f5f5f5;
        --fg-color: #333;
        --card-color: white;
        --input-bg: #fff;
        --button-bg: #4CAF50;
        --button-hover: #45a049;
    }
    body.dark {
        --bg-color: #121212;
        --fg-color: #f0f0f0;
        --card-color: #1e1e1e;
        --input-bg: #333;
        --button-bg: #1f883d;
        --button-hover: #2ea043;
    }
    body {
        font-family: Arial, sans-serif;
        max-width: 700px;
        margin: auto;
        padding: 20px;
        background-color: var(--bg-color);
        color: var(--fg-color);
        transition: background 0.3s, color 0.3s;
    }
    .container {
        background-color: var(--card-color);
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
        text-align: center;
    }
    .form-group {
        margin-bottom: 15px;
    }
    label {
        display: block;
        margin-bottom: 5px;
    }
    input[type="password"],
    input[type="text"],
    select {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        background: var(--input-bg);
        color: var(--fg-color);
    }
    .checkbox-group {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
    }
    button {
        background-color: var(--button-bg);
        color: white;
        border: none;
        padding: 10px;
        border-radius: 4px;
        cursor: pointer;
        width: 100%;
        font-size: 16px;
        transition: background 0.3s;
    }
    button:hover {
        background-color: var(--button-hover);
    }
    .keyboard {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(30px, 1fr));
        gap: 4px;
        margin-top: 10px;
    }
    .strength-meter {
        height: 10px;
        background: #eee;
        border-radius: 5px;
        overflow: hidden;
    }
    .strength-bar {
        height: 100%;
        width: 0%;
        transition: width 0.3s, background-color 0.3s;
    }
    .output {
        background: #e0e0e0;
        border-radius: 5px;
        padding: 10px;
        word-break: break-all;
        margin-top: 10px;
    }
    .hidden {
        display: none;
    }
    .toggle-dark {
        position: absolute;
        top: 10px;
        right: 10px;
        cursor: pointer;
        background: none;
        border: none;
        font-size: 20px;
    }
</style>
</head>
<body>
<button class="toggle-dark" title="Toggle Dark Mode" onclick="toggleDark()">üåì</button>
<div class="container">
<h1>Offline Password Generator</h1>

<div class="form-group">
    <label for="masterPassword">Enter your base password:</label>
    <input type="password" id="masterPassword" placeholder="e.g. mySimplePass123">
</div>

<div class="form-group">
    <label for="customSalt">Optional: Add salt (e.g. website or label)</label>
    <input type="text" id="customSalt" placeholder="e.g. gmail.com">
</div>

<div class="form-group">
    <label for="passwordLength">Password length: <span id="lengthValue">25</span></label>
    <input type="range" min="8" max="64" value="25" id="passwordLength">
</div>

<div class="form-group">
    <label for="passwordType">Complexity:</label>
    <select id="passwordType">
        <option value="high">High (Letters, Numbers, Symbols)</option>
        <option value="medium">Medium (Letters and Numbers)</option>
        <option value="letters">Letters Only</option>
    </select>
</div>

<div class="checkbox-group">
    <input type="checkbox" id="showKeyboard" checked>
    <label for="showKeyboard">On-screen keyboard</label>
</div>

<div class="checkbox-group">
    <input type="checkbox" id="showPassword">
    <label for="showPassword">Show password</label>
</div>

<div id="keyboard" class="keyboard hidden"></div>

<button id="generateBtn">üîê Generate Password</button>

<div class="form-group">
    <label>Password Strength:</label>
    <div class="strength-meter"><div id="strengthBar" class="strength-bar"></div></div>
</div>

<div class="form-group">
    <label>Generated Password:</label>
    <div class="output" id="generatedPassword">Your password will appear here</div>
    <button id="copyBtn">üìã Copy</button>
</div>

</div>

<script>
const masterPassword = document.getElementById("masterPassword");
const customSalt = document.getElementById("customSalt");
const passwordLength = document.getElementById("passwordLength");
const lengthValue = document.getElementById("lengthValue");
const passwordType = document.getElementById("passwordType");
const showPassword = document.getElementById("showPassword");
const showKeyboard = document.getElementById("showKeyboard");
const keyboard = document.getElementById("keyboard");
const generateBtn = document.getElementById("generateBtn");
const output = document.getElementById("generatedPassword");
const copyBtn = document.getElementById("copyBtn");
const strengthBar = document.getElementById("strengthBar");

// Dark mode
function toggleDark() {
    document.body.classList.toggle('dark');
    localStorage.setItem('darkmode', document.body.classList.contains('dark'));
}
if (localStorage.getItem('darkmode') === 'true') {
    document.body.classList.add('dark');
}

// Keyboard logic
const qwertyKeys = "1234567890qwertyuiopasdfghjklzxcvbnm!@#$%^&*()_+-=[]{}|;:',.<>?/\~`".split("");
function buildKeyboard() {
    keyboard.innerHTML = '';
    qwertyKeys.forEach(k => {
        const btn = document.createElement("button");
        btn.textContent = k;
        btn.onclick = () => {
            masterPassword.value += k;
        };
        keyboard.appendChild(btn);
    });
    ["Backspace", "Clear"].forEach(action => {
        const btn = document.createElement("button");
        btn.textContent = action;
        btn.onclick = () => {
            if (action === "Backspace") {
                masterPassword.value = masterPassword.value.slice(0, -1);
            } else {
                masterPassword.value = '';
            }
        };
        keyboard.appendChild(btn);
    });
}
showKeyboard.onchange = () => {
    keyboard.classList.toggle("hidden", !showKeyboard.checked);
    if (showKeyboard.checked) buildKeyboard();
};
if (showKeyboard.checked) buildKeyboard();

// Password length display
passwordLength.oninput = () => lengthValue.textContent = passwordLength.value;

// Generate password
function simpleHash(str) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
        hash = (hash << 5) - hash + str.charCodeAt(i);
        hash |= 0;
    }
    return hash;
}

function generatePassword() {
    const base = masterPassword.value + (customSalt.value || "");
    const len = parseInt(passwordLength.value);
    const complexity = passwordType.value;

    let charset = "";
    if (complexity === "high") charset = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=[]{}|;:,.<>?";
    else if (complexity === "medium") charset = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    else charset = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";

    let stretched = base;
    for (let i = 0; i < 100000; i++) {
        stretched = simpleHash(stretched).toString();
    }

    let pwd = "";
    for (let i = 0; i < len; i++) {
        const index = Math.abs(simpleHash(stretched + i)) % charset.length;
        pwd += charset[index];
    }

    output.textContent = showPassword.checked ? pwd : "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢";
    output.setAttribute("data-pwd", pwd);

    const strength = Math.min(100, len + (/[A-Z]/.test(pwd) + /[0-9]/.test(pwd) + /[^A-Za-z0-9]/.test(pwd)) * 20);
    strengthBar.style.width = strength + "%";
    strengthBar.style.backgroundColor = strength > 70 ? "green" : strength > 40 ? "orange" : "red";
}

generateBtn.onclick = generatePassword;

showPassword.onchange = () => {
    const pwd = output.getAttribute("data-pwd") || "";
    output.textContent = showPassword.checked ? pwd : "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢";
};

copyBtn.onclick = () => {
    const pwd = output.getAttribute("data-pwd");
    if (!pwd) return alert("Generate password first!");
    navigator.clipboard.writeText(pwd).then(() => {
        copyBtn.textContent = "‚úÖ Copied!";
        setTimeout(() => copyBtn.textContent = "üìã Copy", 2000);
    });
};
</script>
</body>
</html>
